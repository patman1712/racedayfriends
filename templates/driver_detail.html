{% extends "base.html" %}

{% block content %}
<div class="driver-profile-container">
    
    <!-- Header Section -->
    <div class="driver-header">
        <div class="driver-bg"></div>
        <div class="container" style="position: relative; z-index: 2; height: 100%; display: flex; align-items: flex-end; padding-bottom: 40px;">
            <div class="driver-intro">
                <h1 class="driver-name-lg">{{ driver.name }}</h1>
                <div class="driver-meta">
                    <span class="team-role">{{ driver.role or 'Driver' }}</span>
                    {% if driver.nationality %}
                    <span class="fi fi-{{ driver.nationality.lower() }}"></span>
                    {% endif %}
                </div>
            </div>
            <div class="driver-number-lg">{{ driver.number or '00' }}</div>
        </div>
    </div>

    <div class="container" style="margin-top: 40px; margin-bottom: 80px;">
        <div class="profile-grid">
            
            <!-- Left Column: Stats & Info -->
            <div class="profile-left">
                <div class="stat-card">
                    <h3>iRating</h3>
                    <div class="stat-value">{{ driver.ir_sports or '-' }}</div>
                </div>
                <div class="stat-card">
                    <h3>Safety Rating</h3>
                    <div class="stat-value">{{ driver.sr_sports or '-' }}</div>
                </div>
                
                {% if driver.twitch %}
                <a href="{{ driver.twitch }}" target="_blank" class="twitch-btn">
                    <i class="fab fa-twitch"></i> Watch on Twitch
                </a>
                {% endif %}
            </div>

            <!-- Right Column: Sim Rig Showcase -->
            <div class="profile-right">
                {% if driver.rig %}
                <div class="rig-showcase">
                    <h2 class="section-title"><i class="fas fa-gamepad"></i> My Sim Rig</h2>
                    
                    <div class="rig-specs">
                        {% if driver.rig.type %}
                        <div class="spec-item">
                            <span class="spec-label">Cockpit</span>
                            <span class="spec-value">{{ driver.rig.type }}</span>
                        </div>
                        {% endif %}
                        
                        {% if driver.rig.monitors %}
                        <div class="spec-item">
                            <span class="spec-label">Monitors</span>
                            <span class="spec-value">{{ driver.rig.monitors }}</span>
                        </div>
                        {% endif %}

                        {% if driver.rig.base %}
                        <div class="spec-item">
                            <span class="spec-label">Wheelbase</span>
                            <span class="spec-value">{{ driver.rig.base }}</span>
                        </div>
                        {% endif %}

                        {% if driver.rig.wheel %}
                        <div class="spec-item">
                            <span class="spec-label">Steering Wheel</span>
                            <span class="spec-value">{{ driver.rig.wheel }}</span>
                        </div>
                        {% endif %}

                        {% if driver.rig.pedals %}
                        <div class="spec-item">
                            <span class="spec-label">Pedals</span>
                            <span class="spec-value">{{ driver.rig.pedals }}</span>
                        </div>
                        {% endif %}
                        
                        {% if driver.rig.extras %}
                        <div class="spec-item">
                            <span class="spec-label">Extras</span>
                            <span class="spec-value">{{ driver.rig.extras }}</span>
                        </div>
                        {% endif %}
                    </div>

                    <!-- Rig Photos -->
                    {% if driver.rig.images %}
                    <div class="rig-gallery">
                        {% for img in driver.rig.images %}
                        <a href="#img-{{ loop.index }}" class="rig-thumb">
                            <img src="{{ img }}" alt="Sim Rig Setup">
                        </a>
                        
                        <!-- Lightbox -->
                        <div id="img-{{ loop.index }}" class="lightbox">
                            <a href="#!" class="close-lightbox"></a>
                            <div class="lightbox-content">
                                <img src="{{ img }}" alt="Sim Rig Setup">
                                <a href="#!" class="close-btn">&times;</a>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                    {% endif %}
                </div>
                {% else %}
                <div class="rig-placeholder">
                    <p style="color: var(--rdf-silver);">Keine Hardware-Infos hinterlegt.</p>
                </div>
                {% endif %}
            </div>

        </div>
    </div>
</div>

<style>
    /* Header */
    .driver-header {
        height: 400px;
        background: #0B1829;
        position: relative;
        overflow: hidden;
        border-bottom: 1px solid var(--rdf-teal);
    }
    .driver-bg {
        position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        background-image: radial-gradient(var(--rdf-teal) 1px, transparent 1px);
        background-size: 20px 20px; opacity: 0.1;
    }
    .driver-name-lg {
        font-size: 4rem; color: white; text-transform: uppercase; line-height: 1;
        text-shadow: 0 4px 10px rgba(0,0,0,0.5);
    }
    .driver-meta { display: flex; gap: 15px; align-items: center; margin-top: 10px; }
    .team-role { 
        background: rgba(79, 209, 197, 0.2); color: var(--rdf-teal); 
        padding: 5px 15px; border-radius: 20px; font-weight: bold; text-transform: uppercase; letter-spacing: 1px;
    }
    .driver-number-lg {
        font-size: 12rem; font-weight: 900; color: rgba(255,255,255,0.05);
        position: absolute; right: 0; bottom: -40px;
        line-height: 1;
    }

    /* Grid Layout */
    .profile-grid {
        display: grid; grid-template-columns: 300px 1fr; gap: 40px;
    }
    @media(max-width: 900px) {
        .profile-grid { grid-template-columns: 1fr; }
    }

    /* Stats */
    .stat-card {
        background: #15273d; padding: 20px; border-radius: 8px; margin-bottom: 20px;
        border-left: 4px solid var(--rdf-teal);
    }
    .stat-card h3 { color: var(--rdf-silver); font-size: 0.9rem; text-transform: uppercase; margin-bottom: 5px; }
    .stat-value { font-size: 2rem; color: white; font-weight: bold; }
    
    .twitch-btn {
        display: block; background: #6441a5; color: white; text-align: center; padding: 15px;
        border-radius: 4px; text-decoration: none; font-weight: bold; transition: background 0.2s;
    }
    .twitch-btn:hover { background: #7d5bbe; }

    /* Rig Showcase */
    .rig-showcase {
        background: #0f1c2e; border: 1px solid var(--rdf-border); border-radius: 8px; padding: 30px;
    }
    .section-title {
        color: var(--rdf-teal); text-transform: uppercase; border-bottom: 1px solid rgba(255,255,255,0.1);
        padding-bottom: 15px; margin-bottom: 25px;
    }
    
    .rig-specs {
        display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px;
    }
    .spec-item {
        background: rgba(255,255,255,0.03); padding: 15px; border-radius: 4px;
    }
    .spec-label { display: block; color: var(--rdf-silver); font-size: 0.8rem; text-transform: uppercase; margin-bottom: 5px; }
    .spec-value { color: white; font-weight: 600; font-size: 1.1rem; }

    /* Gallery */
    .rig-gallery {
        display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 15px;
    }
    .rig-thumb {
        display: block; height: 120px; border-radius: 6px; overflow: hidden; border: 2px solid transparent; transition: border-color 0.2s;
    }
    .rig-thumb:hover { border-color: var(--rdf-teal); }
    .rig-thumb img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.3s; }
    .rig-thumb:hover img { transform: scale(1.05); }

    /* Lightbox (CSS Only) */
    .lightbox {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9);
        z-index: 9999; display: none; align-items: center; justify-content: center;
    }
    .lightbox:target { display: flex; animation: fadeIn 0.3s; }
    .lightbox-content { position: relative; max-width: 90%; max-height: 90%; }
    .lightbox-content img { max-width: 100%; max-height: 80vh; border: 2px solid var(--rdf-teal); border-radius: 4px; }
    .close-lightbox { position: absolute; top: 0; left: 0; width: 100%; height: 100%; cursor: default; }
    .close-btn {
        position: absolute; top: -40px; right: 0; color: white; font-size: 2rem; text-decoration: none;
    }
    
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
</style>
{% endblock %}